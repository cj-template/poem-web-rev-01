import htmx from"./lib/htmx/htmx.esm.js";async function stub(){}function formatToLocalTime(){stub().then(function(){let e=document.getElementsByClassName("js-date-local");for(let n of e){let t=new Date(n.innerHTML);if(isNaN(t.getTime())||t.toString()==="Invalid Date"||t.getTime()===0)return;n.innerHTML=t.toLocaleString()}}).then(function(){let e=document.getElementsByClassName("js-date-local");for(let t of e)t.classList.remove("js-date-local")})}async function clearNavActive(){let e=document.getElementsByClassName("nav-item");for(let t of e)t.classList.remove("nav-item-active")}function addNavActive(){let e=document.getElementById("tag-update");e!==null&&clearNavActive().then(function(){if(e.dataset.tag===0[0]||e.dataset.tag==="")return;let t=document.getElementById(e.dataset.tag);t!==null&&t.classList.add("nav-item-active")}).then(function(){e.remove()})}let token="";function refreshCsrfToken(){fetch("/csrf/token").then(function(e){return e.json()}).then(function(e){return token=e.token,updateTokenInput(e.token),e.token}).catch(function(e){console.error(e)})}function updateTokenInput(e){let t=document.querySelectorAll("input[name='csrf_token']");for(let n of t)n.value=e}function getCsrfToken(){return token}export function start(){htmx.onLoad(function(){formatToLocalTime(),addNavActive(),refreshCsrfToken()}),htmx.on("htmx:responseError",function(e){if(e.detail.xhr.status===422)return;let t=document.createElement("pre");t.classList.add("pre"),t.innerText=e.detail.xhr.responseText;let n=document.createElement("div");n.innerHTML="<h1>Error "+e.detail.xhr.status+" "+e.detail.xhr.statusText+"</h1><br>",n.appendChild(t),htmx.swap("#main-content",n.outerHTML,{swapStyle:"innerHTML",swapDelay:0,settleDelay:0,transition:!1,ignoreTitle:!0,head:"<title>"+e.detail.xhr.status+" "+e.detail.xhr.statusText+"</title>",scroll:"top",show:"#main-content",focusScroll:!0})}),window.csrfToken=getCsrfToken}