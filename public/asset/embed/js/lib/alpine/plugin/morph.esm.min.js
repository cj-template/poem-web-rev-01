function morph(e,t,n){monkeyPatchDomSetAttributeToAllowAtSymbols();let o=createMorphContext(n),s=typeof t=="string"?createElement(t):t;return window.Alpine&&window.Alpine.closestDataStack&&!e._x_dataStack&&(s._x_dataStack=window.Alpine.closestDataStack(e),s._x_dataStack&&window.Alpine.cloneNode(e,s)),o.patch(e,s),e}function morphBetween(e,t,n,s={}){monkeyPatchDomSetAttributeToAllowAtSymbols();let c=createMorphContext(s),i=e.parentNode,l=new Block(e,t),o=typeof n=="string"?(()=>{let e=document.createElement("div");return e.insertAdjacentHTML("beforeend",n),e})():n,a=document.createComment("[morph-start]"),r=document.createComment("[morph-end]");o.insertBefore(a,o.firstChild),o.appendChild(r);let d=new Block(a,r);window.Alpine&&window.Alpine.closestDataStack&&(o._x_dataStack=window.Alpine.closestDataStack(i),o._x_dataStack&&window.Alpine.cloneNode(i,o)),c.patchChildren(l,d)}function createMorphContext(e={}){let s=e=>e.getAttribute("key"),n=()=>{},t={key:e.key||s,lookahead:e.lookahead||!1,updating:e.updating||n,updated:e.updated||n,removing:e.removing||n,removed:e.removed||n,adding:e.adding||n,added:e.added||n};return t.patch=function(e,n){if(t.differentElementNamesTypesOrKeys(e,n))return t.swapElements(e,n);let s=!1,o=!1,i=e=>t.skipUntilCondition=e;if(shouldSkipChildren(t.updating,()=>o=!0,i,e,n,()=>s=!0))return;if(e.nodeType===1&&window.Alpine&&(window.Alpine.cloneNode(e,n),e._x_teleport&&n._x_teleport&&t.patch(e._x_teleport,n._x_teleport)),textOrComment(n)){t.patchNodeValue(e,n),t.updated(e,n);return}s||t.patchAttributes(e,n),t.updated(e,n),o||t.patchChildren(e,n)},t.differentElementNamesTypesOrKeys=function(e,n){return e.nodeType!=n.nodeType||e.nodeName!=n.nodeName||t.getKey(e)!=t.getKey(n)},t.swapElements=function(e,n){if(shouldSkip(t.removing,e))return;let s=n.cloneNode(!0);if(shouldSkip(t.adding,s))return;e.replaceWith(s),t.removed(e),t.added(s)},t.patchNodeValue=function(e,t){let n=t.nodeValue;e.nodeValue!==n&&(e.nodeValue=n)},t.patchAttributes=function(e,t){if(e._x_transitioning)return;if(e._x_isShown&&!t._x_isShown)return;if(!e._x_isShown&&t._x_isShown)return;let s=Array.from(e.attributes),n=Array.from(t.attributes);for(let n=s.length-1;n>=0;n--){let o=s[n].name;t.hasAttribute(o)||e.removeAttribute(o)}for(let t=n.length-1;t>=0;t--){let s=n[t].name,o=n[t].value;e.getAttribute(s)!==o&&e.setAttribute(s,o)}},t.patchChildren=function(e,n){let a=t.keyToMap(e.children),i={},o=getFirstNode(n),s=getFirstNode(e);for(;o;){seedingMatchingId(o,s);let c=t.getKey(o),r=t.getKey(s);if(t.skipUntilCondition){let i=!s||t.skipUntilCondition(s),a=!o||t.skipUntilCondition(o);if(i&&a)t.skipUntilCondition=null;else{i||(s=s&&getNextSibling(e,s)),a||(o=o&&getNextSibling(n,o));continue}}if(!s)if(c&&i[c]){let n=i[c];e.appendChild(n),s=n,r=t.getKey(s)}else{if(!shouldSkip(t.adding,o)){let n=o.cloneNode(!0);e.appendChild(n),t.added(n)}o=getNextSibling(n,o);continue}let l=e=>e&&e.nodeType===8&&e.textContent==="[if BLOCK]><![endif]",d=e=>e&&e.nodeType===8&&e.textContent==="[if ENDBLOCK]><![endif]";if(l(o)&&l(s)){let i=0,a=s;for(;s;){let t=getNextSibling(e,s);if(l(t))i++;else if(d(t)&&i>0)i--;else if(d(t)&&i===0){s=t;break}s=t}let r=s;i=0;let c=o;for(;o;){let e=getNextSibling(n,o);if(l(e))i++;else if(d(e)&&i>0)i--;else if(d(e)&&i===0){o=e;break}o=e}let u=o,h=new Block(a,r),m=new Block(c,u);t.patchChildren(h,m);continue}if(s.nodeType===1&&t.lookahead&&!s.isEqualNode(o)){let i=getNextSibling(n,o),a=!1;for(;!a&&i;)i.nodeType===1&&s.isEqualNode(i)&&(a=!0,s=t.addNodeBefore(e,o,s),r=t.getKey(s)),i=getNextSibling(n,i)}if(c!==r){if(!c&&r){i[r]=s,s=t.addNodeBefore(e,o,s),i[r].remove(),s=getNextSibling(e,s),o=getNextSibling(n,o);continue}if(c&&!r&&a[c]&&(s.replaceWith(a[c]),s=a[c],r=t.getKey(s)),c&&r){let l=a[c];if(l)i[r]=s,s.replaceWith(l),s=l,r=t.getKey(s);else{i[r]=s,s=t.addNodeBefore(e,o,s),i[r].remove(),s=getNextSibling(e,s),o=getNextSibling(n,o);continue}}}let u=s&&getNextSibling(e,s);t.patch(s,o),o=o&&getNextSibling(n,o),s=u}let r=[];for(;s;)shouldSkip(t.removing,s)||r.push(s),s=getNextSibling(e,s);for(;r.length;){let e=r.shift();e.remove(),t.removed(e)}},t.getKey=function(e){return e&&e.nodeType===1&&t.key(e)},t.keyToMap=function(e){let n={};for(let s of e){let o=t.getKey(s);o&&(n[o]=s)}return n},t.addNodeBefore=function(e,n,s){if(!shouldSkip(t.adding,n)){let o=n.cloneNode(!0);return e.insertBefore(o,s),t.added(o),o}return n},t}morph.step=()=>{},morph.log=()=>{};function shouldSkip(t,...n){let e=!1;return t(...n,()=>e=!0),e}function shouldSkipChildren(t,n,s,...o){let e=!1;return t(...o,()=>e=!0,n,s),e}var Block,module_default,patched=!1;function createElement(e){const t=document.createElement("template");return t.innerHTML=e,t.content.firstElementChild}function textOrComment(e){return e.nodeType===3||e.nodeType===8}Block=class{constructor(e,t){this.startComment=e,this.endComment=t}get children(){let t=[],e=this.startComment.nextSibling;for(;e&&e!==this.endComment;)t.push(e),e=e.nextSibling;return t}appendChild(e){this.endComment.before(e)}get firstChild(){let e=this.startComment.nextSibling;if(e===this.endComment)return;return e}nextNode(e){let t=e.nextSibling;if(t===this.endComment)return;return t}insertBefore(e,t){return t.before(e),e}};function getFirstNode(e){return e.firstChild}function getNextSibling(e,t){let n;return e instanceof Block?n=e.nextNode(t):n=t.nextSibling,n}function monkeyPatchDomSetAttributeToAllowAtSymbols(){if(patched)return;patched=!0;let t=Element.prototype.setAttribute,e=document.createElement("div");Element.prototype.setAttribute=function(s,o){if(!s.includes("@"))return t.call(this,s,o);e.innerHTML=`<span ${s}="${o}"></span>`;let i=e.firstElementChild.getAttributeNode(s);e.firstElementChild.removeAttributeNode(i),this.setAttributeNode(i)}}function seedingMatchingId(e,t){let n=t&&t._x_bindings&&t._x_bindings.id;if(!n)return;if(!e.setAttribute)return;e.setAttribute("id",n),e.id=n}function src_default(e){e.morph=morph,e.morphBetween=morphBetween}module_default=src_default;export{module_default as default,src_default as morph}